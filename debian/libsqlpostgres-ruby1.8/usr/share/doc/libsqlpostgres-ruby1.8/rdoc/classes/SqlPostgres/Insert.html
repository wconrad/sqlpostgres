
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: SqlPostgres::Insert</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <link rel=StyleSheet href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript" language="JavaScript">
  <!--
  function popCode(url) {
    window.open(url, "Code", 
          "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }
  //-->
  </script>
</head>

<body bgcolor="white">

<table summary="Information on class" width="100%" border="0" cellspacing="0">
 <tr class="title-row">
 <td class="big-title-font">
   <sup><font color="aqua">Class</font></sup> SqlPostgres::Insert
 </td>
 <td align="right">
   <table summary="layout" cellspacing="0" cellpadding="2">
     <tr valign="top">
      <td class="small-title-font">In:</td>
      <td class="small-title-font">
        <a href="../../files/__/lib/sqlpostgres/Insert_rb.html" class="aqua">
../lib/sqlpostgres/Insert.rb
         </a>
<br />
      </td>
     </tr>
     <tr>
      <td class="small-title-font">Parent:</td>
      <td class="small-title-font">
Object
      </td>
     </tr>
   </table>
  </td>
  </tr>
</table>
  <!-- banner header -->



<div class="description"><p>
This class creates and executes an SQL insert statement.
</p>
<p>
Example:
</p>
<pre>
  insert = Insert.new('foo', connection)
  insert.insert('i', 1)
  insert.insert('t', 'foo')
  p insert.statement           # &quot;insert into foo (i, t) values (1,
                               # 'foo')&quot;
  insert.exec
</pre>
</div>


<table summary="Methods" cellpadding="5" width="100%">
<tr><td class="tablesubtitle">Methods</td></tr>
</table>
<div class="name-list">
<a href="#M000061">default_values</a>&nbsp; &nbsp;
<a href="#M000063">exec</a>&nbsp; &nbsp;
<a href="#M000055">insert</a>&nbsp; &nbsp;
<a href="#M000056">insert_array</a>&nbsp; &nbsp;
<a href="#M000057">insert_bytea</a>&nbsp; &nbsp;
<a href="#M000058">insert_bytea_array</a>&nbsp; &nbsp;
<a href="#M000059">insert_qchar</a>&nbsp; &nbsp;
<a href="#M000054">new</a>&nbsp; &nbsp;
<a href="#M000060">select</a>&nbsp; &nbsp;
<a href="#M000062">statement</a>&nbsp; &nbsp;
</div>





<table summary="Method list" cellpadding="5" width="100%">
<tr><td class="tablesubtitle">Public Class methods</td></tr>
</table>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000054"></a>
<a href="Insert.src/M000054.html" target="Code" class="methodtitle"
 onClick="popCode('Insert.src/M000054.html');return false;">
<b>new</b>(table, connection = Connection.default)
</a>
</td></tr>
</table>
<div class="description">
<p>
Create an insert statement
</p>
<dl>
<dt>table</dt><dd>The table name

</dd>
<dt>connection</dt><dd>If supplied, the connection to use. If not supplied, use the default.

</dd>
</dl>
</div>
<table summary="Method list" cellpadding="5" width="100%">
<tr><td class="tablesubtitle">Public Instance methods</td></tr>
</table>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000055"></a>
<a href="Insert.src/M000055.html" target="Code" class="methodtitle"
 onClick="popCode('Insert.src/M000055.html');return false;">
<b>insert</b>(column, value = :no_value)
</a>
</td></tr>
</table>
<div class="description">
<p>
Add a column to the statement. This is for all column types <b>except</b>
bytea.
</p>
<dl>
<dt>column</dt><dd>The column name

</dd>
<dt>value</dt><dd>The value to add. The value is SQL escaped. Should be one of:

<ul>
<li>a String

</li>
<li>an Integer

</li>
<li>a Float

</li>
<li>a Time

</li>
<li>false

</li>
<li>true

</li>
<li>nil

</li>
<li>a <a href="Select.html">Select</a>

</li>
<li>:default

</li>
<li>:no_value

</li>
</ul>
</dd>
</dl>
<p>
Special values:
</p>
<dl>
<dt>a <a href="Select.html">Select</a></dt><dd>The select&#8217;s SQL is added in parentheses

</dd>
<dt>:default</dt><dd>Add the SQL keyword &quot;default&quot; to the statement.

</dd>
<dt>:no_value</dt><dd>Do not add a value for this column. This is used when the values are being
provided by a <a href="Select.html">Select</a> statement.

</dd>
</dl>
<p>
Example (simple)
</p>
<pre>
  insert = Insert.new('foo')
  insert.insert('t', 'bar')
  p insert.statement         # &quot;insert into foo (t) values ('bar')&quot;
</pre>
<p>
Example (select)
</p>
<pre>
  select = Select.new
  select.select('j')
  select.from('bar')
  select.limit(1)
  insert = Insert.new('foo')
  insert.insert('i', select)
  p insert.statement           # &quot;insert into foo (i) values ((select j
                               # from bar limit 1))&quot;
</pre>
<p>
Example (default)
</p>
<pre>
  insert = Insert.new('foo')
  insert.insert('i', :default)
  p insert.statement             # &quot;insert into foo (i) values
                                 # (default)&quot;
</pre>
</div>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000056"></a>
<a href="Insert.src/M000056.html" target="Code" class="methodtitle"
 onClick="popCode('Insert.src/M000056.html');return false;">
<b>insert_array</b>(column, value)
</a>
</td></tr>
</table>
<div class="description">
<p>
<a href="Insert.html">Insert</a> into an array (int[], text[], etc) column.
This is not for byte array (bytea) column types: For that, call <a
href="Insert.html#M000057">insert_bytea</a>.
</p>
<dl>
<dt>column</dt><dd>The column name

</dd>
<dt>value</dt><dd>The value to add.

</dd>
</dl>
<p>
This is used for inserting literals and expressions. To insert the result
of an SQL query, or to insert the default value, call <a
href="Insert.html#M000055">insert</a>.
</p>
</div>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000057"></a>
<a href="Insert.src/M000057.html" target="Code" class="methodtitle"
 onClick="popCode('Insert.src/M000057.html');return false;">
<b>insert_bytea</b>(column, value = :no_value)
</a>
</td></tr>
</table>
<div class="description">
<p>
<a href="Insert.html">Insert</a> into a bytea column. You must use this
function, not <a href="Insert.html#M000055">insert</a>, when inserting a
string into a bytea column. That&#8217;s because bytea columns need special
escaping.
</p>
<dl>
<dt>column</dt><dd>The column name

</dd>
<dt>value</dt><dd>The value to add. Should be one of:

<ul>
<li>a String

</li>
<li>:default

</li>
<li>:no_value

</li>
</ul>
</dd>
</dl>
<p>
Special values:
</p>
<dl>
<dt>a <a href="Select.html">Select</a></dt><dd>The select&#8217;s SQL is added in parentheses

</dd>
<dt>:default</dt><dd>Add the SQL keyword &quot;default&quot; to the statement.

</dd>
<dt>:no_value</dt><dd>Do not add a value for this column. This is used when the values are being
provided by a <a href="Select.html">Select</a> statement.

</dd>
</dl>
<p>
Example:
</p>
<pre>
  insert = Insert.new('foo')
  insert.insert_bytea('t', &quot;\000\001\002\003&quot;)
  p insert.statement     # &quot;insert into foo (t) values
                         # ('\\\\000\\\\001\\\\002\\\\003')&quot;
</pre>
</div>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000058"></a>
<a href="Insert.src/M000058.html" target="Code" class="methodtitle"
 onClick="popCode('Insert.src/M000058.html');return false;">
<b>insert_bytea_array</b>(column, value = :no_value)
</a>
</td></tr>
</table>
<div class="description">
<p>
<a href="Insert.html">Insert</a> into a bytea[] (bytea array) column. You
must use this function, not <a href="Insert.html#M000055">insert</a> or <a
href="Insert.html#M000056">insert_array</a>, because bytea[] columns need
special escaping.
</p>
<pre>
  insert = Insert.new('foo')
  insert.insert_bytea_array('t', [&quot;foo&quot;, &quot;\000bar\nbaz&quot;])
  p insert.statement     # &quot;insert into foo (t) values
                         # ('{\&quot;foo\&quot;,\&quot;\\\\\\\\000bar\nbaz\&quot;}')&quot;
</pre>
</div>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000059"></a>
<a href="Insert.src/M000059.html" target="Code" class="methodtitle"
 onClick="popCode('Insert.src/M000059.html');return false;">
<b>insert_qchar</b>(column, value = :no_value)
</a>
</td></tr>
</table>
<div class="description">
<p>
<a href="Insert.html">Insert</a> into a &quot;char&quot; column. This is a
Postgres specific data type that is different than char or character (yes,
the quotes are part of the type name). &quot;char&quot; values are escaped
differently than normal test, so be sure to use this method and not <a
href="Insert.html#M000055">insert</a> when inserting into a
&quot;char&quot; column.
</p>
<dl>
<dt>column</dt><dd>The column name

</dd>
<dt>value</dt><dd>A string of length 1

</dd>
</dl>
<p>
Example:
</p>
</div>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000060"></a>
<a href="Insert.src/M000060.html" target="Code" class="methodtitle"
 onClick="popCode('Insert.src/M000060.html');return false;">
<b>select</b>(select)
</a>
</td></tr>
</table>
<div class="description">
<p>
<a href="Insert.html">Insert</a> the results of a select statement
</p>
<p>
Example:
</p>
<pre>
  select = Select.new
  select.select('i')
  select.from('bar')
  insert = Insert.new('foo')
  insert.insert('i')
  insert.select(select)
  p insert.statement     # &quot;insert into foo (i) select i from bar&quot;
</pre>
</div>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000061"></a>
<a href="Insert.src/M000061.html" target="Code" class="methodtitle"
 onClick="popCode('Insert.src/M000061.html');return false;">
<b>default_values</b>()
</a>
</td></tr>
</table>
<div class="description">
<p>
insert default values
</p>
<p>
Example:
</p>
<pre>
  insert = Insert.new('foo')
  insert.default_values
  p insert.statement     # &quot;insert into foo default values&quot;
</pre>
</div>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000062"></a>
<a href="Insert.src/M000062.html" target="Code" class="methodtitle"
 onClick="popCode('Insert.src/M000062.html');return false;">
<b>statement</b>()
</a>
</td></tr>
</table>
<div class="description">
<p>
Return the SQL statement. Especially useful for debugging.
</p>
</div>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000063"></a>
<a href="Insert.src/M000063.html" target="Code" class="methodtitle"
 onClick="popCode('Insert.src/M000063.html');return false;">
<b>exec</b>(connection = @connection)
</a>
</td></tr>
</table>
<div class="description">
<p>
Execute the statement.
</p>
<dl>
<dt>connection</dt><dd>If present, the connection to use. If nil, uses the connection passed to
new or, if no connection was passed to new, uses the default connection.

</dd>
</dl>
</div>

</body>
</html>